import streamlit as st
from PIL import Image
from predict import malware_check
import os
os.makedirs("uploads",exist_ok=True)
st.title("Malware Detection")

def load_image(image_file):
    img = Image.open(image_file)
    img.save("uploads/1.png")
    return img


st.write("### Upload image")
image_file = st.file_uploader("Upload Malware Scan Image Here", type=["png","jpg","jpeg"])

if image_file is not None:
    file_details = {"filename":image_file.name, "filetype":image_file.type,"filesize":image_file.size}
    # st.write(file_details)
    st.write("#### Malware Scan Uploaded")
    st.image(load_image(image_file),width=250)

a = st.button("Predict")

if a:
    status,prob = malware_check("uploads/1.png")
    prob = round(prob,3)
    st.write("## "+str(status))
    st.write("Actual Probablity:",prob)